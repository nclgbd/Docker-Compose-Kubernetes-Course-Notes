This section focuses on:
- Understanding Different Kinds of Data
- Images, Containers, and Volumes
- Using Arguments and Environment Variables
## [Cheat sheet](obsidian://open?vault=docker-compose-kubernetes-course&file=cheatsheets%2FCheat-Sheet-Data-Volumes.pdf)
# Understanding Different Kinds of Data

| Question                                                                                           | Response                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| -------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **What are the different kinds of data you will work with in docker?**                             | There are three main kinds of data we work with using docker containers:<br>**Source code**<br>This is data relating to the running of the container, and is seen as necessary to the application. It is written by developers, and thus is added to the image during the build phase. This kind of data is read-only, hence why it's stored in the image rather than the container.<br><br>**Temporary application data**<br>This is data produced while running the container, and its stored in memory or temporary files. It is dynamic and changing, but also ephemeral by nature. This data is read and write data, and is stored in the container rather than the image.<br><br>**Permanent application data**<br>This data is similar to temporary application data, however it must persist even when the container isn't running or is even deleted. Due to this, the data is typically stored in a database with the assistance of a volume. As such, this data is read and write.<br> |
| **What happens to temporary data when a container is stopped and then restarted?**                 | The data still persists as it is attached to the container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **What happens to temporary data when a container is removed and then rerun from the same image?** | The data is removed since the container was removed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
# Working with Volumes in Images and Containers

| Question                                                                  | Response                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **What are the two external data storage types?**                         | **Volumes** and **bind mounts**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **What is a volume?**                                                     | Volumes are folders on your host machine hard drive which are mounted into containers. Volumes persist if a container shuts down. If a container (re-)starts and mounts a volume, any data inside that volume is available in the container. Note that this is different from the `COPY` command, as `COPY` creates a deep copy of the file/path and adds it to the image. Volumes are a link between a source and destination location.                                                                                                                                                                               |
| **What are the two kinds of volumes?**                                    | **Anonymous volumes** and **named volumes**. Anonymous volumes are deleted once a container is removed. Note that if you create a container using the `docker run --rm` flag, the anonymous volume will automatically be removed once the container is shut down. Without the `--rm` flag, the volume will not be removed even when using the `docker rm` command. You can use anonymous volumes to prioritize container-internal paths.<br><br>Named volumes will persist after shutdown, and are great for when you need data to persist but you don't need to edit them directly.                                   |
| **What command allows you to see all docker volumes on your system?**     | `docker volume ls`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **How can you add volumes to a container?**                               | To add an anonymous volume you can edit the `Dockerfile` by adding a line `VOLUME ["path/to/data"]` or using `docker run -v <path/to/data>` when launching a new container.<br><br>To add a named volume you can use `docker run -v <volume-name>:<path/to/data>`. `<volume-name>` is your name of choice and is what will be listed when running the `docker volume ls` command rather than the auto-generated name. `path/to/data` is the path in the container where the data will persist.<br><br>You can also create a volume detached from any container using the command `docker volume create <volume-name>`. |
| **How can you remove volumes?**                                           | You can remove a volume using either `docker volume rm <volume-name>` or `docker volume prune` to remove all volumes disconnected from any container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **How can you get metadata relating to a specific volume?**               | `docker volume inspect <volume-name>`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **What is a bind mount?**                                                 | A bind mount is a folder that is linked to a container that is editable. A common use case for this is during development when editing source code as this allows for the developer to quickly see changes.                                                                                                                                                                                                                                                                                                                                                                                                            |
| **How can you add a bind mount to a container?**                          | You add a bind mount in a similar way to adding containers: `docker run -v </absolute/path/to/data>:<path/to/data>`, where `/absolute/path/to/data` is the absolute path to the data on your local machine, and `path/to/data` is the path in the container where the data will persist. A quick shorthand to do this is `-v $(pwd):/app` on Linux and `-v "%cd%":/app` on Windows.                                                                                                                                                                                                                                    |
| **How do you create a read-only volume? When would you want to do this?** | You simply add `-v $(pwd):/app:ro`, where `ro` means read-only. This is useful as you don't want the container to make changes local, however you do want your local changes to be reflected in the container.<br><br>To maintain certain writability aspects you can add `-v /app/temp`                                                                                                                                                                                                                                                                                                                               |
| **How can you prevent files from being added with the `COPY` command?**   | Using a `.dockerignore` file will prevent certain files/directories from being added during build time. This functions very similarly to the `.gitignore` file.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
# ARGuments and ENVironment Variables
| Question                                            | Response                                                                                                                                                                                                                                                                                                                                                                                                     |
| --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **What are arguments?**                             | Arguments are parameters that are provided at build time that. They are available inside of the `Dockerfile` but are not accessible in `CMD` or any application code.                                                                                                                                                                                                                                        |
| **What are environment variables?**                 | Environment variables are dynamic name-value pairs stored outside of a program's code that influence how running processes behave. They are available inside the `Dockerfile` and application code.                                                                                                                                                                                                          |
| **How are arguments/environment variables useful?** | They are useful as they enable us to customize the image building process without having to hardcode values, making it more flexible.                                                                                                                                                                                                                                                                        |
| **How do you use environment variables?**           | There are a couple of different ways to do this. What is consistent, however, is that the `Dockerfile` needs to be modified by adding `ENV <variable-name> <value>`. Now, you can refer to the environment variable using `$<variable-name>`.<br><br>To set the environment variable you can:<br>    1) `docker run -e <variable-name>=<value>` (or `--env`)<br>    2) `docker run --env-file /path/to/.env` |
| **How do you use build time arguments?**            | You can set the default build argument by adding the line `ARG <arg-name>:<value>` to the `Dockerfile`. Then during build time, add the flag `--build-arg <arg-name>:<value>`.                                                                                                                                                                                                                               |